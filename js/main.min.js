function loadImage(e){return new Promise((t,r)=>{e.complete&&0!==e.naturalHeight?t():(e.onload=()=>t(),e.onerror=r)})}function preloadFirstImage(){let e=document.querySelector(".container"),t=e.querySelectorAll(".slider-image.lazy"),r=e.querySelector(".image-loader");Promise.all(Array.from(t).map(e=>loadImage(e))).then(()=>{t.forEach(e=>{e.classList.remove("lazy"),e.classList.add("loaded")}),r.classList.add("hidden")}).catch(e=>{console.error("Error loading first images:",e),r.classList.add("hidden")})}const imageObserver=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let r=e.target,l=r.querySelector(".image-loader"),a=r.querySelectorAll(".slider-image.lazy");a.length>0&&Promise.all(Array.from(a).map(e=>loadImage(e))).then(()=>{a.forEach(e=>{e.classList.remove("lazy"),e.classList.add("loaded")}),l.classList.add("hidden")}).catch(e=>{console.error("Error loading images:",e),l.classList.add("hidden")}),t.unobserve(r)}})},{rootMargin:"100px",root:document.querySelector(".carousel")});function preloadAdjacentImages(){let e=document.querySelector(".carousel"),t=document.querySelectorAll(".container"),r=e.scrollLeft,l=t[0].offsetWidth+30,a=Math.round(r/l);[a-1,a+1].forEach(e=>{if(e>=0&&e<t.length){let r=t[e],l=r.querySelectorAll(".slider-image.lazy"),a=r.querySelector(".image-loader");l.length>0&&Promise.all(Array.from(l).map(e=>loadImage(e))).then(()=>{l.forEach(e=>{e.classList.remove("lazy"),e.classList.add("loaded")}),a.classList.add("hidden")})}})}let scrollTimeout;document.addEventListener("DOMContentLoaded",()=>{preloadFirstImage();let e=document.querySelectorAll(".container");e.forEach((e,t)=>{t>0&&imageObserver.observe(e)}),e.forEach(e=>{let t=e.querySelector(".slider"),r=e.querySelector(".slider-button"),l=r=>{let l=e.getBoundingClientRect(),a=Math.max(0,Math.min(r-l.left,l.width)),o=a/l.width*100;e.style.setProperty("--position",`${o}%`),t.value=o},a=!1,o=null,s=t=>{o=e,a=!0,e.classList.add("is-dragging")},d=t=>{if(!a||o!==e)return;t.cancelable&&t.preventDefault();let r=t.clientX??t.touches[0].clientX;l(r)},i=()=>{a&&o===e&&(a=!1,e.classList.remove("is-dragging"),o=null)};r.addEventListener("mousedown",s),r.addEventListener("touchstart",s,{passive:!0}),window.addEventListener("mousemove",d),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("mouseup",i),window.addEventListener("touchend",i),t.addEventListener("input",t=>{e.style.setProperty("--position",`${t.target.value}%`)})});let t=document.querySelector(".carousel");t.addEventListener("scroll",()=>{clearTimeout(scrollTimeout),scrollTimeout=setTimeout(()=>{preloadAdjacentImages()},100)})});